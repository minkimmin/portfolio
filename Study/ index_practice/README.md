데이터 접근 성능을 수치로 검증해보고자 10만 건의 데이터를 기반으로 인덱스 적용 전후 실행계획을 비교하는 실험을 진행했습니다. 

실험에 앞서 강의 기반 간단한 게시판 재구현을 먼저 한 후에 1,000건, 10,000건, 이후 추가로 10만 건의 더미 데이터를 단계적으로 추가해 실행계획을 비교했습니다. 

더미 데이터 생성할 때는 작성자 비율, 최근 날짜 비율, 조회수 분포도 설계 및 조건 추가 등 인덱스 효과를 더 잘 나타내기 용이하도록 단순히 CONNECT BY LEVEL이 아닌 반복문 LOOP를 사용했습니다. 이를 통해 특정 컬럼(writer, readcount, register등)에 데이터가 몰리는 상황을 재현하고 인덱스 전후 실행계획의 변화를 분석했습니다. 

1,000건의 데이터를 삽입했을 시에는 FULL SCAN으로 조회가 됐고, 이후 1만, 10만 건을 추가하자 옵티마이저가 게시물 10건을 찾는데 예상한 cost가 3이어서 인덱스로 사용된 것을 확인했습니다. 

또한 조회수 많은 게시물 찾는 인덱스에 where 조건으로 조회수 500 이상을 추가하자 FULL TABLE SCAN에서 INDEX RANGE SCAN으로 변경 됐으며 옵티마이저 기준 cost가 301에서 3으로 감소한 것을 확인했습니다. 

복합 인덱스를 생성하기 전에 생성했던 단일 인덱스를 먼저 삭제하고, 제일 많이 사용하는 컬럼을 왼쪽부터 writer, readcount, register 순으로 배치해 생성했습니다. 

복합 인덱스 생성하기 전에는 비용계산이 301이었고, 생성 후에는 4로 감소한 것을 확인했습니다.   

이처럼 Full Table Scan과 Index Range Scan의 차이를 분석하며 cost 감소를 확인했습니다.


